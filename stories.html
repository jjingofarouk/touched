<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Read inspiring impact stories from Touched Hearts, showcasing transformed lives through compassion and support.">
    <title>Impact Stories | Touched Hearts</title>
    <link rel="stylesheet" href="./assets/css/styles.css">
    <script src="https://kit.fontawesome.com/your-kit-code.js" crossorigin="anonymous"></script>
</head>
<body>
    <!-- Navigation -->
    <header class="header">
        <nav class="nav-container">
            <a href="index.html" class="logo">Touched Hearts</a>
            <button class="nav-toggle" aria-label="Toggle navigation">
                <i class="fas fa-bars"></i>
            </button>
            <ul class="nav-links">
                <li><a href="index.html">Home</a></li>
                <li><a href="news.html">News</a></li>
                <li><a href="stories.html" class="active">Stories</a></li>
                <li><a href="contact.html">Contact</a></li>
            </ul>
        </nav>
    </header>

    <!-- Page Header -->
    <section class="page-header">
        <div class="header-content">
            <h1>Impact Stories</h1>
            <p>Discover the real-life journeys of hope, healing, and transformation made possible by Touched Hearts.</p>
        </div>
    </section>

    <!-- Stories Section -->
    <section class="stories-section" aria-label="Impact Stories">
        <div id="stories-container" class="stories-grid">
            <!-- Stories will be dynamically inserted here -->
            <div class="loading-message">Loading stories...</div>
        </div>
        <div id="no-stories" class="no-stories-message" style="display: none;">
            <p>Sorry, no stories are available at the moment. Please check back later!</p>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <p>&copy; <span id="current-year"></span> Touched Hearts. All rights reserved.</p>
        <div class="social-links">
            <a href="#" aria-label="Follow us on Twitter"><i class="fab fa-twitter"></i></a>
            <a href="#" aria-label="Follow us on Facebook"><i class="fab fa-facebook"></i></a>
            <a href="#" aria-label="Follow us on Instagram"><i class="fab fa-instagram"></i></a>
        </div>
    </footer>

    <!-- JavaScript -->
    <script>
        // Dynamic Year in Footer
        document.getElementById('current-year').textContent = new Date().getFullYear();

        // Mobile Navigation Toggle
        const navToggle = document.querySelector('.nav-toggle');
        const navLinks = document.querySelector('.nav-links');
        navToggle.addEventListener('click', () => {
            navLinks.classList.toggle('nav-open');
            const isOpen = navLinks.classList.contains('nav-open');
            navToggle.setAttribute('aria-label', isOpen ? 'Close navigation' : 'Toggle navigation');
            navToggle.innerHTML = isOpen ? '<i class="fas fa-times"></i>' : '<i class="fas fa-bars"></i>';
        });

        // Fetch and Display Stories
        fetch('./stories.json')
            .then(response => {
                if (!response.ok) throw new Error('Network response was not ok');
                return response.json();
            })
            .then(stories => {
                const container = document.getElementById('stories-container');
                const loadingMessage = container.querySelector('.loading-message');
                const noStoriesMessage = document.getElementById('no-stories');

                // Remove loading message
                if (loadingMessage) loadingMessage.remove();

                if (stories.length === 0) {
                    noStoriesMessage.style.display = 'block';
                    return;
                }

                stories.forEach(story => {
                    const storyHTML = `
                        <article class="story-card" tabindex="0">
                            <img src="${story.image}" alt="${story.title}" class="story-image" loading="lazy">
                            <div class="story-content">
                                <h2 class="story-title">${story.title}</h2>
                                <blockquote class="story-quote">"${story.quote}"</blockquote>
                                <p class="story-text">${story.story}</p>
                            </div>
                        </article>
                    `;
                    container.innerHTML += storyHTML;
                });
            })
            .catch(error => {
                console.error('Error loading stories:', error);
                const container = document.getElementById('stories-container');
                container.innerHTML = '<p class="error-message">Failed to load stories. Please try again later.</p>';
            });
    </script>
</body>
</html>
